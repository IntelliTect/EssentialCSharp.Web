import{reactive as f,computed as h,onUnmounted as W}from"vue";var o=typeof window<"u",m=()=>o?window.innerWidth:0,z=()=>o?window.innerHeight:0,S=i=>i??m(),l=i=>i??z(),d=i=>({width:S(i?.width),height:l(i?.height)});var u=i=>{let e=0,t=i(),r=f(d()),c=({width:v,height:p})=>{r.width=v,r.height=p};t.addObserver("composition-api",c);let a=()=>{++e},w=()=>{e=Math.max(e-1,0)};return()=>(e===0&&t.subscribe().dispatch(),a(),W(()=>{w(),e===0&&t.unsubscribe()}),{width:h(()=>r.width),height:h(()=>r.height)})};var s=class{#e=new Map;#r;#s;#t=!1;#i;constructor(e){let{delay:t=33}=e??{};this.#r=t,this.#i=this.#d.bind(this)}addObserver(e,t){return this.#e.set(e,t),t(this.#n()),this}deleteObserver(e){return this.#e.delete(e),this}deleteObservers(){return this.#e.clear(),this}notifyObservers(e){return this.#e.forEach(t=>{t(e)}),this}subscribe(){return typeof window>"u"?this:this.#t?this:(window.addEventListener("resize",this.#i),window.addEventListener("orientationchange",this.#i),this.#t=!0,this)}unsubscribe(){return this.#t?(window.removeEventListener("resize",this.#i),window.removeEventListener("orientationchange",this.#i),this.#t=!1,this):this}setDelay(e){return this.#r=e,this}info(){return{delay:this.#r,subscribed:this.#t,observersCount:this.#e.size}}dispatch(){return this.#o(),this}#n(){return typeof window>"u"?{width:0,height:0}:{width:window.innerWidth,height:window.innerHeight}}#o(){let e=this.#n();this.notifyObservers(e)}#d(){clearTimeout(this.#s),window.setTimeout(()=>{},1),this.#s=window.setTimeout(()=>{this.#o()},this.#r)}};var n,b=()=>(n||(n=new s),n);var N=u(b);export{N as useWindowSize};
